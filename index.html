<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>화학 실험 시뮬레이션</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background: linear-gradient(to right, #d3f7fa, #ffffff, #d3f8fd);
      color: #333;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transition: all 0.5s ease;
    }

    h1 {
      font-size: 2.5em;
      text-shadow: 1px 1px 3px rgba(255,255,255,0.7);
      margin-bottom: 10px;
    }

    p {
      font-size: 1.2em;
      text-shadow: 1px 1px 3px rgba(255,255,255,0.7);
      margin-top: 0;
    }

    button {
      padding: 10px 20px;
      font-size: 1em;
      color: white;
      background-color: #007bff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s;
      margin: 5px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    button:hover {
      background-color: #0056b3;
      transform: scale(1.05);
      box-shadow: 0 6px 12px rgba(0,0,0,0.3);
    }

    .hidden {
      display: none;
    }

    #stageArea {
      width: 80%;
      max-width: 700px;
      min-height: 120px;
      margin: 30px auto 20px;
      padding: 20px;
      border: 2px solid #aaa;
      border-radius: 10px;
      background-color: #fff;
      font-size: 1.1em;
      font-weight: bold;
      color: #333;
      text-align: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    .blank {
      display: inline-block;
      min-width: 80px;
      padding: 6px 10px;
      margin: 0 5px;
      border: 2px dashed #666;
      background-color: #f8f8f8;
      cursor: pointer;
    }

    #message {
      margin-top: 20px;
      color: #d9534f;
      font-weight: bold;
      min-height: 1.2em;
    }

    .toolbox {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
    }

    .tool {
      width: 140px;
      height: 100px;
      background-color: #e0e0e0;
      border: 2px solid #999;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: grab;
      user-select: none;
      transition: transform 0.2s;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .tool:hover {
      transform: scale(1.05);
    }

    .infoBox {
      background-color: white;
      border: 2px solid #ccc;
      border-radius: 10px;
      padding: 20px;
      width: 80%;
      max-width: 700px;
      margin: 20px auto;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      font-size: 1.1em;
      line-height: 1.6;
    }
  </style>
</head>
<body>

  <!-- 시작 화면 -->
  <div id="mainmenu">
    <h1>화학 실험 시뮬레이션 - 아스피린 합성하기</h1>
    <p>made by 정임</p>
    <button id="startButton">시작하기</button>
  </div>

  <!-- 선택 화면 -->
  <div id="section" class="hidden">
    <h1>화학 실험 시뮬레이션 - 아스피린 합성하기</h1>
    <p>made by 정임</p>
    <button id="explanation">실험설명</button>
    <button id="experiment">실험하기</button>
  </div>

  <!-- 실험 설명 화면 -->
  <div id="explanationScreen" class="hidden">
    <h1>실험 설명</h1>
    <div class="infoBox">
      <p>
        아스피린은 살리실산과 아세트산무수물을 반응시켜 합성합니다.
        실험에서는 인산을 촉매로 사용하고, 반응 후 생성된 물질은 냉각을 통해 결정화됩니다.
        결정은 거름종이를 이용해 여과하고, 건조 후 전자저울로 무게를 측정합니다.<br> <br>
        1. 아스피린 Aspirin <br>
        - 아세틸 살리실산 Acetylsalicylic Acid(C9H8O4) <br>
        - 최초로 합성된 해열 및 소염 진통제이자 혈전 예방약 <br>
        - 살리실산(C7H6O3)과 아세트산(CH3COOH)이 반응하여 아세틸 살리실산(C9H8O4) 생성 <br>
        + 아세틸:CH3CO (아세틸기), 살리실산: C7H6O3
        <img src="https://github.com/sumin86/recycle/blob/main/plastic.png?raw=true" alt="투명 페트병 설명 이미지" class="box-image">
      </p>
    </div>
    <button onclick="goBack()">돌아가기</button>
  </div>

  <!-- 실험 화면 -->
  <div id="experimentScreen" class="hidden">
    <h1>화학 실험 시뮬레이션</h1>
    <div id="stageArea">[실험 단계 설명이 여기에 표시됩니다]</div>
    <div id="message"></div>
    <div class="toolbox">
      <div class="tool" draggable="true" id="전자저울">전자저울</div>
      <div class="tool" draggable="true" id="살리실산">살리실산</div>
      <div class="tool" draggable="true" id="피펫">피펫</div>
      <div class="tool" draggable="true" id="아세트산무수물">아세트산무수물</div>
      <div class="tool" draggable="true" id="스포이드">스포이드</div>
      <div class="tool" draggable="true" id="인산">인산</div>
      <div class="tool" draggable="true" id="핫플레이트">핫플레이트</div>
      <div class="tool" draggable="true" id="중탕">중탕</div>
      <div class="tool" draggable="true" id="증류수">증류수</div>
      <div class="tool" draggable="true" id="거름종이">거름종이</div>
      <div class="tool" draggable="true" id="페트리접시">페트리접시</div>
    </div>
    <button id="back">돌아가기</button>
  </div>

<script>
  document.getElementById('startButton').addEventListener('click', () => {
    document.getElementById('mainmenu').classList.add('hidden');
    document.getElementById('section').classList.remove('hidden');
  });

  document.getElementById('explanation').addEventListener('click', () => {
    document.getElementById('section').classList.add('hidden');
    document.getElementById('explanationScreen').classList.remove('hidden');
  });

  function goBack() {
    document.getElementById('explanationScreen').classList.add('hidden');
    document.getElementById('section').classList.remove('hidden');
  }

  document.getElementById('back').addEventListener('click', () => {
    document.getElementById('experimentScreen').classList.add('hidden');
    document.getElementById('section').classList.remove('hidden');
  });

  const steps = [
    { text: "1단계: _____을 이용해 _____을 계량하여 삼각플라스크에 담습니다.", answers: ["전자저울", "살리실산"] },
    { text: "2단계: _____으로 _____을 정확히 넣습니다.", answers: ["피펫", "아세트산무수물"] },
    { text: "3단계: _____로 _____을 몇 방울 첨가합니다.", answers: ["스포이드", "인산"] },
    { text: "4단계: _____ 위 비커에 물을 가열하고 삼각플라스크를 _____시킵니다.", answers: ["핫플레이트", "중탕"] },
    { text: "5단계: _____를 넣어 식히고, 결정 생성을 관찰합니다.", answers: ["증류수"] },
    { text: "6단계: 결정들을 _____가 깔린 ______에 옮겨 건조한 뒤 _____로 무게를 측정합니다.", answers: ["거름종이", "페트리접시", "전자저울"] }
  ];

  let currentStep = 0;
  let filled = [];

  const stageArea = document.getElementById("stageArea");
  const message = document.getElementById("message");

  document.getElementById('experiment').addEventListener('click', () => {
    document.getElementById('section').classList.add('hidden');
    document.getElementById('experimentScreen').classList.remove('hidden');
    currentStep = 0;
    renderStep(currentStep);
  });

  function renderStep(stepIndex) {
    const step = steps[stepIndex];
    const parts = step.text.split("_____");
    stageArea.innerHTML = "";
    filled = Array(step.answers.length).fill(false);

    parts.forEach((part, index) => {
      stageArea.append(part);
      if (index < step.answers.length) {
        const blank = document.createElement("span");
        blank.className = "blank";
        blank.dataset.index = index;
        blank.textContent = "[빈칸]";
        blank.addEventListener("dragover", e => e.preventDefault());
        blank.addEventListener("drop", e => handleDrop(e, index, blank, step));
        stageArea.append(blank);
      }
    });
  }

  function handleDrop(e, index, blank, step) {
    e.preventDefault();
    const toolId = e.dataTransfer.getData("text/plain");
    const correct = step.answers[index];

    if (toolId === correct) {
      blank.textContent = toolId;
      blank.style.border = "2px solid green";
      blank.style.backgroundColor = "#d4f9d4";
      filled[index] = true;

      if (filled.every(Boolean)) {
        message.textContent = "";
        currentStep++;
        if (currentStep < steps.length) {
          setTimeout(() => renderStep(currentStep), 1000);
        } else {
          stageArea.innerHTML = "✅ 실험 완료! 수고하셨습니다.";
        }
      }
    } else {
      message.textContent = "❌ 이 빈칸에 들어갈 도구가 아닙니다.";
    }
  }

  document.querySelectorAll(".tool").forEach(tool => {
    tool.addEventListener("dragstart", e => {
      e.dataTransfer.setData("text/plain", e.target.id);
    });
  });
</script>

</body>
</html>
