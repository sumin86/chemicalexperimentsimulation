<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>화학 실험 시뮬레이션</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background: linear-gradient(to right, #d3f7fa, #ffffff, #d3f8fd);
      color: #333;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transition: all 0.5s ease;
    }

    h1 {
      font-size: 2.5em;
      text-shadow: 1px 1px 3px rgba(255,255,255,0.7);
      margin-bottom: 10px;
    }

    p {
      font-size: 1.2em;
      text-shadow: 1px 1px 3px rgba(255,255,255,0.7);
      margin-top: 0;
    }

    button {
      padding: 10px 20px;
      font-size: 1em;
      color: white;
      background-color: #007bff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s, transform 0.2s;
      margin: 5px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    button:hover {
      background-color: #0056b3;
      transform: scale(1.05);
      box-shadow: 0 6px 12px rgba(0,0,0,0.3);
    }

    .hidden {
      display: none;
    }

    #stageArea {
      width: 80%;
      max-width: 700px;
      min-height: 150px;
      margin: 30px auto 10px;
      padding: 20px;
      border: 2px solid #aaa;
      border-radius: 10px;
      background-color: #fff;
      font-size: 1.1em;
      font-weight: bold;
      color: #333;
      text-align: center;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    .blank {
      display: inline-block;
      min-width: 80px;
      padding: 6px 10px;
      margin: 0 5px;
      border: 2px dashed #666;
      background-color: #f8f8f8;
      cursor: pointer;
    }

    #message {
      margin-top: 20px;
      color: #d9534f;
      font-weight: bold;
      min-height: 1.2em;
    }

    .toolbox {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
    }

    .tool {
      width: 140px;
      height: 100px;
      background-color: #e0e0e0;
      border: 2px solid #999;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: grab;
      user-select: none;
      transition: transform 0.2s;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .tool:hover {
      transform: scale(1.05);
    }

    .infoBox {
      background-color: white;
      border: 2px solid #ccc;
      border-radius: 10px;
      padding: 20px;
      width: 80%;
      max-width: 700px;
      margin: 20px auto;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      font-size: 1.1em;
      line-height: 1.6;
    }
  </style>
</head>
<body>

  <div id="mainmenu">
    <h1>화학 실험 시뮬레이션 - 아스피린 합성하기</h1>
    <p>made by 정임</p>
    <button id="startButton">시작하기</button>
  </div>

  <div id="section" class="hidden">
    <h1>화학 실험 시뮬레이션 - 아스피린 합성하기</h1>
    <p>made by 정임</p>
    <button id="explanation">실험설명</button>
    <button id="experiment">실험하기</button>
  </div>

  <div id="explanationScreen" class="hidden">
    <h1>실험 설명</h1>
    <div class="infoBox">
      <p>
        1. 아스피린 Aspirin <br>
        - 아세틸 살리실산 Acetylsalicylic Acid(C9H8O4) <br>
        - 최초로 합성된 해열 및 소염 진통제이자 혈전 예방약 <br>
        - 살리실산(C7H6O3)과 아세트산(CH3COOH)이 반응하여 아세틸 살리실산(C9H8O4) 생성 <br>
        + 아세틸:CH3CO (아세틸기), 살리실산: C7H6O3<br>
        <img src="https://github.com/sumin86/chemicalexperimentsimulation/blob/main/%EC%95%84%EC%84%B8%ED%8A%B8%EC%82%B0%20%EC%95%84%EC%8A%A4%ED%94%BC%EB%A6%B0.png?raw=true" alt="살리실산 아세트산" class="infoBox"> <br><br>
        2. 반응 원리<br>
        - 반응식: C7H6O3 + C4H6O3 → C9H8O4 + CH3COOH <br>
        - 실험에서는 아스피린 수득률 올리기 위해 아세트산(CH3COOH) 대신 아세트산 무수물(C4H6O3) 사용 <br>
        <img src="https://github.com/sumin86/chemicalexperimentsimulation/blob/main/%EC%82%B4%EB%A6%AC%EC%8B%A4%EC%82%B0%20%EC%95%84%EC%84%B8%ED%8A%B8%EC%82%B0%EB%AC%B4%EC%88%98%EB%AC%BC.png?raw=true" alt="살리실산 아세트산무수물" class="infoBox"> <br><br>
        3. 실험하기<br>
        - 목표 : 아스피린(C9H8O4) 합성<br>
        - 시약 : 살리실산, 아세트산 무수물, 인산(촉매), 증류수, 얼음<br>
        - 실험 기구 : 100ml 삼각플라스크, 전자 저울, 피펫, 스포이드, 1L 비커, 핫플레이트, 거름종이, 페트리접시<br>
        (1) 살리실산 2.5g + 아세트산 무수물 3ml + 인산 3방울 (촉매)<br>
        (2) 80°C에서 10분 물 중탕 가열<br>
        (3) 삼각 플라스크 냉각해 결정 생성 관찰<br>
        (4) 거름종이 이용해 여과 후 건조 ⇒ 아스피린 수득률 계산 <br>
      </p>
    </div>
    <button onclick="goBack()">돌아가기</button>
  </div>

  <div id="experimentScreen" class="hidden">
    <h1>화학 실험 시뮬레이션</h1>
    <div id="stageArea">[실험 단계 설명이 여기에 표시됩니다]</div>
    <div id="message"></div>
    <div class="toolbox">
      <div class="tool" draggable="true" id="전자저울">전자저울</div>
      <div class="tool" draggable="true" id="살리실산">살리실산</div>
      <div class="tool" draggable="true" id="피펫">피펫</div>
      <div class="tool" draggable="true" id="아세트산무수물">아세트산무수물</div>
      <div class="tool" draggable="true" id="스포이드">스포이드</div>
      <div class="tool" draggable="true" id="인산">인산</div>
      <div class="tool" draggable="true" id="핫플레이트">핫플레이트</div>
      <div class="tool" draggable="true" id="중탕">중탕</div>
      <div class="tool" draggable="true" id="증류수">증류수</div>
      <div class="tool" draggable="true" id="거름종이">거름종이</div>
      <div class="tool" draggable="true" id="페트리접시">페트리접시</div>
    </div>
    <button id="back">돌아가기</button>
  </div>

  <script>
    document.getElementById('startButton').addEventListener('click', () => {
      document.getElementById('mainmenu').classList.add('hidden');
      document.getElementById('section').classList.remove('hidden');
    });

    document.getElementById('explanation').addEventListener('click', () => {
      document.getElementById('section').classList.add('hidden');
      document.getElementById('explanationScreen').classList.remove('hidden');
    });

    function goBack() {
      document.getElementById('explanationScreen').classList.add('hidden');
      document.getElementById('section').classList.remove('hidden');
    }

    document.getElementById('back').addEventListener('click', () => {
      document.getElementById('experimentScreen').classList.add('hidden');
      document.getElementById('section').classList.remove('hidden');
    });

    const steps = [
      {
        text: "1단계: _____을 이용해 _____을 계량하여 삼각플라스크에 담습니다.",
        answers: ["전자저울", "살리실산"],
        image: "https://raw.githubusercontent.com/sumin86/chemicalexperimentsimulation/main/1.jpg"
      },
      {
        text: "2단계: _____으로 _____을 정확히 넣습니다.",
        answers: ["피펫", "아세트산무수물"],
        image: "https://raw.githubusercontent.com/sumin86/chemicalexperimentsimulation/main/2.jpg"
      },
      {
        text: "3단계: _____로 _____을 몇 방울 첨가합니다.",
        answers: ["스포이드", "인산"],
        image: "https://raw.githubusercontent.com/sumin86/chemicalexperimentsimulation/main/3.jpg"
      },
      {
        text: "4단계: _____ 위 비커에 물을 가열하고 삼각플라스크를 _____시킵니다.",
        answers: ["핫플레이트", "중탕"],
        image: "https://raw.githubusercontent.com/sumin86/chemicalexperimentsimulation/main/4.jpg"
      },
      {
        text: "5단계: _____를 넣어 식히고, 결정 생성을 관찰합니다.",
        answers: ["증류수"],
        image: "https://raw.githubusercontent.com/sumin86/chemicalexperimentsimulation/main/5.jpg"
      },
      {
        text: "6단계: 결정들을 _____가 깔린 ______에 옮겨 건조합니다.",
        answers: ["거름종이", "페트리접시"],
        image: "https://raw.githubusercontent.com/sumin86/chemicalexperimentsimulation/main/6.jpg"
      },
      {
        text: "7단계: 건조시킨 결정들을 _____로 무게를 측정합니다.",
        answers: ["전자저울"],
        image: "https://raw.githubusercontent.com/sumin86/chemicalexperimentsimulation/main/7.jpg"
      }
    ];

    let currentStep = 0;
    let filled = [];

    const stageArea = document.getElementById("stageArea");
    const message = document.getElementById("message");

    document.getElementById('experiment').addEventListener('click', () => {
      document.getElementById('section').classList.add('hidden');
      document.getElementById('experimentScreen').classList.remove('hidden');
      currentStep = 0;
      renderStep(currentStep);
    });

    function renderStep(stepIndex) {
      const step = steps[stepIndex];
      const parts = step.text.split("_____");
      stageArea.innerHTML = "";
      filled = Array(step.answers.length).fill(false);

      parts.forEach((part, index) => {
        stageArea.append(part);
        if (index < step.answers.length) {
          const blank = document.createElement("span");
          blank.className = "blank";
          blank.dataset.index = index;
          blank.textContent = "[빈칸]";
          blank.addEventListener("dragover", e => e.preventDefault());
          blank.addEventListener("drop", e => handleDrop(e, index, blank, step));
          stageArea.append(blank);
        }
      });

      if (step.image) {
        const img = document.createElement("img");
        img.src = step.image;
        img.alt = "실험 단계 이미지";
        img.style.marginTop = "20px";
        img.style.width = "200px";
        img.style.height = "auto";
        img.style.display = "block";
        img.style.margin = "10px auto";
        img.style.borderRadius = "10px";
        img.style.boxShadow = "0 2px 10px rgba(0,0,0,0.2)";
        stageArea.appendChild(document.createElement("br"));
        stageArea.appendChild(img);
      }
    }

    function handleDrop(e, index, blank, step) {
      e.preventDefault();
      const toolId = e.dataTransfer.getData("text/plain");
      const correct = step.answers[index];

      if (toolId === correct) {
        blank.textContent = toolId;
        blank.style.border = "2px solid green";
        blank.style.backgroundColor = "#d4f9d4";
        filled[index] = true;

        if (filled.every(Boolean)) {
          message.textContent = "";
          currentStep++;
          if (currentStep < steps.length) {
            setTimeout(() => renderStep(currentStep), 1000);
          } else {
            stageArea.innerHTML = "✅ 실험 완료! 수고하셨습니다.";
          }
        }
      } else {
        message.textContent = "❌ 이 빈칸에 들어갈 도구가 아닙니다.";
      }
    }

    document.querySelectorAll(".tool").forEach(tool => {
      tool.addEventListener("dragstart", e => {
        e.dataTransfer.setData("text/plain", e.target.id);
      });
    });
  </script>
</body>
</html>
